<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Texas Holdem Tournament Timer</title>
</head>
<body class="container">
    <div>
        Blind Structure

    </div>

    <div>
        <button>Main 80%</button>
        <button>Daily 70%</button>
        <button>Event 80%</button>
        <button onclick="Customize()">Customize</button>
    </div>
    <div>
        <div>
            <input placeholder="Level" id="level"></input>
            <input placeholder="Break" id="break"></input>
            <button onclick="make_structure()">만들기</button>

            
            
        </div>
        <div class="d-flex justify-content-around pt-5">
            <div class="structure_list">
                <div class="pb-2" id="structure_list">
                    리스트
                </div>
                <div style="border: 1px solid black;" class="pt-2">
                    dasf
                </div>
            </div>
            <div class="structure">
                <div class="d-flex justify-content-end">
                    <input placeholder="Title" id="title" class="me-3"></input>
                    <button onclick="save_structure()" id="save_structure">저장하기</button>
                </div>
                <div  class="pt-2 d-flex justify-content-end" >
                    <div id="structure" style="border: 1px solid black;">

                    </div>
                </div>
            </div>
            
        </div>
        
        
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/dab690a483.js" crossorigin="anonymous"></script>
    <script src="main.js"></script>
    <script>
        let level_num = document.getElementById("level")
        let break_num = document.getElementById("break")
        let title = document.getElementById("title")

        document.getElementById("save_structure").style.display = "none"
        document.getElementById("title").style.display = "none"

        

        function make_structure(){
            if(level_num.value == 0){
                alert('레벨을 입력하세요')
            }else{
                let template = `
                    <table>    
                        <tr>
                            <th>level</th>
                            <th>Small</th>
                            <th>big</th>
                            <th>Ante</th>
                        </tr>
                        {{structure}}
                        
                    </table>`

                let structure = []
                for(let i = 1 ; i <= level_num.value ; i++){
                    if(i%break_num.value !== 0 || i == level_num.value){
                        structure.push(`
                            <tr>
                                <th>${i}</th>
                                <td><input id="sb${i}" type="number" value="0" class="text-end"></input></td>
                                <td><input id="bb${i}" type="number" value="0" class="text-end"></input></td>
                                <td><input id="at${i}" type="number" value="0" class="text-end"></input></td>
                            </tr>
                        `)
                    }else{
                        structure.push(`
                            <tr>
                                <th>${i}</th>
                                <td><input id="sb${i}" type="number" value="0" class="text-end"></input></td>
                                <td><input id="bb${i}" type="number" value="0" class="text-end"></input></td>
                                <td><input id="at${i}" type="number" value="0" class="text-end"></input></td>
                            </tr>
                            <tr>
                                <th colspan="4">break</th>
                            </tr>`
                        )
                    }
                    
                }
                template = template.replace("{{structure}}",structure.join(" "))
                document.getElementById("structure").innerHTML = template
                document.getElementById("save_structure").style.display = "block"
                document.getElementById("title").style.display = "block"
            }
        }

        function save_structure(){
            let blinds = {}
            blinds.title = title.value
            blinds.break_num = break_num.value
            blinds.level_num = level_num.value

            for(let i = 1 ; i <= level_num.value ; i++){
                let sb_val = document.getElementById(`sb${i}`).value
                let bb_val = document.getElementById(`bb${i}`).value
                let at_val = document.getElementById(`at${i}`).value
                blinds[`sb${i}`] = sb_val
                blinds[`bb${i}`] = bb_val
                blinds[`at${i}`] = at_val
                
                }

            db.collection('Blind Structure').add(blinds)

        }


    </script>
</body>
</html>